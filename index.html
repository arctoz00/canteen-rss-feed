<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="UTF-8">
  <title>Canteen Menu Ticker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      padding: 20px;
    }
    .feed-container {
      max-width: 800px;
      margin: 0 auto;
      background: #fff;
      padding: 20px;
      border: 1px solid #ddd;
      min-height: 100px;
    }
    .feed-item h2 {
      font-size: 1.3em;
      margin: 0 0 5px;
    }
    .feed-item p {
      margin: 5px 0;
    }
    .feed-item small {
      color: #666;
    }
  </style>
</head>
<body>
  <div class="feed-container" id="feedContainer">
    Henter RSS-feed…
  </div>

  <script>
    async function loadFeed() {
      try {
        // Udskift nedenstående URL med den fulde URL til dit feed.xml
        const response = await fetch('https://arctoz00.github.io/canteen-rss-feed/feed.xml');
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        const xmlText = await response.text();
        const parser = new DOMParser();
        const xmlDoc = parser.parseFromString(xmlText, "application/xml");
        const items = xmlDoc.querySelectorAll("item");
        const feedItems = [];
        items.forEach(item => {
          const title = item.querySelector("title") ? item.querySelector("title").textContent : "";
          const description = item.querySelector("description") ? item.querySelector("description").textContent : "";
          const pubDate = item.querySelector("pubDate") ? item.querySelector("pubDate").textContent : "";
          // Sammenkæd informationerne til ét hub-item
          const content = `<div class="feed-item">
                             <h2>${title}</h2>
                             <p>${description}</p>
                             <p><small>${pubDate}</small></p>
                           </div>`;
          feedItems.push(content);
        });
        return feedItems;
      } catch (error) {
        console.error("Fejl ved hentning af feed:", error);
        document.getElementById("feedContainer").innerHTML = "Fejl ved hentning af RSS-feed.";
        return [];
      }
    }

    async function startTicker() {
      const feedItems = await loadFeed();
      if (feedItems.length === 0) {
        return;
      }
      let index = 0;
      const container = document.getElementById("feedContainer");
      // Vis det første hub-item med det samme
      container.innerHTML = feedItems[index];
      // Skift til næste item hvert 10. sekund (10 000 ms)
      setInterval(() => {
        index = (index + 1) % feedItems.length;
        container.innerHTML = feedItems[index];
      }, 10000);
    }

    document.addEventListener("DOMContentLoaded", startTicker);
  </script>
</body>
</html>
